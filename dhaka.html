<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISTRICT LEGACY | Official Map</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --b-bg: #0B0E11; --b-card: #1E2329; --b-yellow: #FCD535; }
        body { background: var(--b-bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; text-align: center; scroll-behavior: smooth; }

        .main-headline { background: #000; color: var(--b-yellow); padding: 15px; font-size: 28px; font-weight: 900; text-transform: uppercase; border-bottom: 1px solid #333; }

        /* সার্চ বার স্টাইল */
        .search-section { background: #181d23; padding: 15px; display: flex; justify-content: center; gap: 10px; }
        .search-section input { width: 250px; padding: 10px; border-radius: 5px; border: 1px solid #444; background: #0b0e11; color: #fff; outline: none; }
        .search-section input:focus { border-color: var(--b-yellow); }
        .search-btn { background: var(--b-yellow); color: #000; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; }

        .top-nav { position: sticky; top: 0; background: var(--b-card); padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--b-yellow); z-index: 1000; }
        
        .payment-section { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .house-logo { width: 40px; height: 40px; background: #fff; border-radius: 50%; padding: 5px; }
        .pay-details b { font-size: 16px; color: var(--b-yellow); }

        .canvas-container { width: 100%; margin-top: 5px; background: #fff; position: relative; }
        canvas { display: block; width: 100%; height: auto; }

        /* হাইলাইট মার্কার */
        #highlightMarker { position: absolute; width: 50px; height: 50px; border: 4px solid var(--b-yellow); box-shadow: 0 0 20px var(--b-yellow); display: none; pointer-events: none; z-index: 5; }

        /* পপআপ ও অন্যান্য স্টাইল আগের মতোই থাকবে... */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; justify-content: center; align-items: center; }
        .modal-box { background: var(--b-card); padding: 35px; border-radius: 15px; width: 90%; max-width: 400px; border: 2px solid var(--b-yellow); }
        .modal-box.success { background: var(--b-yellow) !important; color: #000; }
        .wa-support { position: fixed; bottom: 30px; right: 30px; background: #2ebd85; color: white; padding: 15px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; z-index: 2000; }
    </style>
</head>
<body id="mainBody">

<div class="main-headline">DISTRICT LEGACY MAP</div>

<div class="search-section">
    <input type="number" id="findPlotInput" placeholder="Enter Plot Number (1-10000)">
    <button class="search-btn" onclick="searchPlot()">FIND PLOT</button>
</div>

<div class="top-nav">
    <div class="payment-section" onclick="copyPaymentNum()">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/30/The_White_House_Icon.svg" class="house-logo">
        <div class="pay-details">
            <span style="font-size: 10px; display: block; color: #848e9c;">BKASH/NAGAD/ROCKET (COPY)</span>
            <b>01756206213</b>
        </div>
    </div>
    <div style="display: flex; gap: 10px;">
        <a href="index.html" style="color:#fff; text-decoration:none; padding:10px; border:1px solid #444; border-radius:5px; font-size:14px;">← HOME</a>
        <button class="search-btn" style="background:var(--b-yellow); color:#000;" onclick="openOrder()">BUY PLOT (৳36)</button>
    </div>
</div>

<div class="canvas-container" id="cHolder">
    <div id="highlightMarker"></div>
    <canvas id="legacyCanvas"></canvas>
</div>

<div id="orderModal" class="modal">...</div>
<div id="supportModal" class="modal">...</div>

<a href="javascript:void(0)" class="wa-support" onclick="openSupportDirect()">
    <i class="fab fa-whatsapp"></i> LIVE SUPPORT
</a>

<script>
    const cv = document.getElementById('legacyCanvas');
    const ctx = cv.getContext('2d');
    const bSize = 50; 
    const cols = Math.floor(window.innerWidth / bSize); // স্ক্রিন অনুযায়ী কয়টা কলাম হবে
    
    cv.width = window.innerWidth;
    cv.height = (10000 / cols) * bSize + 100;

    function draw() {
        ctx.fillStyle = "#fff"; ctx.fillRect(0,0,cv.width, cv.height);
        ctx.strokeStyle = "#ddd"; ctx.lineWidth = 1;
        for(let x=0; x<cv.width; x+=bSize){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,cv.height); ctx.stroke(); }
        for(let y=0; y<cv.height; y+=bSize){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(cv.width,y); ctx.stroke(); }
    }
    draw();

    // সার্চ ফাংশন
    function searchPlot() {
        const pNum = document.getElementById('findPlotInput').value;
        if(!pNum || pNum < 1 || pNum > 10000) return alert("Enter valid Plot ID (1-10000)");

        const row = Math.floor((pNum - 1) / cols);
        const col = (pNum - 1) % cols;
        
        const targetX = col * bSize;
        const targetY = row * bSize;

        // মার্কার সেট করা
        const marker = document.getElementById('highlightMarker');
        marker.style.display = 'block';
        marker.style.left = targetX + "px";
        marker.style.top = targetY + "px";

        // অটো স্ক্রল টু সেই পজিশন
        window.scrollTo({
            top: cv.offsetTop + targetY - 200, // একটু উপরে থাকবে যাতে কাস্টমার দেখতে পায়
            behavior: 'smooth'
        });
    }

    function copyPaymentNum() { navigator.clipboard.writeText("01756206213"); alert("Copied!"); }
    function openOrder() { document.getElementById('orderModal').style.display='flex'; }
    // ...বাকি ফাংশনগুলো আগের মতোই থাকবে...
</script>
</body>
</html>
